webpackJsonp([3],{"+pR7":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Dd8w"),o=a.n(i),s=a("woOf"),r=a.n(s),l=a("BO1k"),n=a.n(l),u=(a("NC6I"),a("NYxO")),d=a("GUlH"),_=a("vMJZ"),c=a("E4LH"),w=a("vLgD"),p={filters:{depFilter:function(t){return{1:"通识教育中心",2:"行政中心",3:"教务处",4:"招生就业处",5:"人事处",6:"财务处",7:"质量中心",8:"信息中心",9:"后勤部",10:"工程机械学院",11:"智能制造学院",12:"人工智能学院",13:"建筑工业学院"}[t]},statuTextFilter:function(t){return{1:"推进中",2:"已延时",3:"已完成",4:"已评分"}[t]},statusFilter:function(t){return{1:"primary",2:"danger",3:"success",4:"warning"}[t]},fileFilter:function(t){return-1!==t.indexOf("[")&&-1!==t.indexOf("]")?t.split("[")[0]+t.split("]")[1]:t},forNumFilter:function(t){var e=0;if(t.length){var a=!0,i=!1,o=void 0;try{for(var s,r=n()(t);!(a=(s=r.next()).done);a=!0){"3"==s.value.p_statu&&(e+=1)}}catch(t){i=!0,o=t}finally{try{!a&&r.return&&r.return()}finally{if(i)throw o}}}return e}},data:function(){return{list:null,listLoading:!0,total:0,pageSizes:[10,15,20],listQuery:{page:1,size:10,w_title:"",w_statu:"1",w_starttime:"",w_endtime:""},form:{w_title:"",w_content:"",dep:"",userid:"",w_starttime:"",w_endtime:"",progress:"",w_source:"",w_operator:this.$store.state.user.userId,w_operator_name:this.$store.state.user.introduction},isEdit:!1,operateTitle:"",formShow:!1,statuOptions:[{label:"推进中",value:"1"},{label:"已延时",value:"2"},{label:"已完成",value:"3"},{label:"已评分",value:"4"}],departmentOptions:[{label:"通识教育中心",value:"1"},{label:"行政中心",value:"2"},{label:"教务处",value:"3"},{label:"招生就业处",value:"4"},{label:"人事处",value:"5"},{label:"财务处",value:"6"},{label:"质量中心",value:"7"},{label:"信息中心",value:"8"},{label:"后勤部",value:"9"},{label:"工程机械学院",value:"10"},{label:"智能制造学院",value:"11"},{label:"人工智能学院",value:"12"},{label:"建筑工业学院",value:"13"}],userOptions:[],auditFormShow:!1,auditTitle:"",audit:{auditType:1,w_id:"",userid:"",p_delaytime:"",p_content:"",p_audit:"",w_score_qua:"",w_score_time:""},detailShow:!1,detailData:null,downloadLoading:!1}},watch:{listQuery:{handler:function(){this.search()},deep:!0},"form.dep":{handler:function(t){this.form.userid="",t&&this._getDepUser()},deep:!0}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;this.listLoading=!0,Object(d.g)(this.listQuery).then(function(e){e&&(t.list=e.data.list,t.total=e.data.count,t.listLoading=!1)})},handleSizeChange:function(t){this.listQuery.size=t},handleCurrentChange:function(t){this.listQuery.page=t},search:function(){this.fetchData()},operation:function(t,e,a){Object(w.a)(this,e,a,t)},operate:function(t,e){var a=this;"add"===t?(this.operateTitle="新增任务",this.isEdit=!1):"edit"===t&&(this.isEdit=!0,this.form=r()({},{w_id:e.w_id,w_title:e.w_title,w_content:e.w_content,dep:e.u_dep,userid:e.w_userid,progress:e.progress,w_operator:e.w_operator,w_operator_name:e.w_operator_name,w_source:e.w_source,w_starttime:e.w_starttime,w_endtime:e.w_endtime,w_statu:e.w_statu}),setTimeout(function(){a.form.userid=e.w_userid},100),this.operateTitle="编辑任务"),this.formShow=!0},operateClose:function(t){this.$refs[t].resetFields(),this.formShow=!1,this.form={w_title:"",w_content:"",dep:"",userid:"",w_starttime:"",w_endtime:"",w_source:"",w_operator:this.$store.state.user.userId,w_operator_name:this.$store.state.user.introduction,progress:""}},save:function(t){var e=this;if(!0===this.isEdit)this.$refs[t].validate(function(t){if(!t)return!1;Object(d.d)(e.form).then(function(t){t.state?(e.$message({type:"success",message:t.msg}),e.fetchData(),e.formShow=!1):e.$message({type:"error",message:t.msg})})});else{var a=r()({},this.form);this.$refs[t].validate(function(t){if(!t)return!1;Object(d.a)(a).then(function(t){t.state?(e.$message({type:"success",message:t.msg}),e.fetchData(),e.formShow=!1):e.$message({type:"error",message:t.msg})})})}},auditFun:function(t,e){switch(t){case 1:this.auditTitle="申请延时",this.audit=r()({},{auditType:1,w_id:e.w_id,w_userid:e.w_userid,p_delaytime:"",w_title:e.w_title,p_content:"",p_audit:""});break;case 2:this.auditTitle="审核延时",this.audit=r()({},{auditType:2,w_id:e.w_id,w_title:e.w_title,w_userid:e.w_userid,p_delaytime:"",p_content:"",p_audit:""});break;case 3:this.auditTitle="任务打分",this.audit=r()({},{auditType:3,w_id:e.w_id,w_title:e.w_title,w_userid:e.w_userid,p_delaytime:"",p_content:"",p_audit:"",w_score_qua:"",w_score_time:""})}this.auditFormShow=!0},auditClose:function(t){this.$refs[t].resetFields(),this.auditFormShow=!1},auditSave:function(t,e){var a=this;switch(this.audit.auditType){case 1:this.$refs[t].validate(function(t){if(!t)return!1;Object(d.c)({p_statu:"2",w_id:a.audit.w_id,w_title:a.audit.w_title,w_userid:a.audit.w_userid,p_delaytime:a.audit.p_delaytime,p_content:"用户【"+a.$store.state.user.introduction+"】申请了【"+a.audit.w_title+"】任务延迟至【"+Object(c.a)(a.audit.p_delaytime,"date")+"】。",p_audit:a.audit.p_audit}).then(function(t){t.state?(a.$message({type:"success",message:t.msg}),a.fetchData(),a.auditFormShow=!1):a.$message({type:"error",message:t.msg})})});break;case 2:this.$refs[t].validate(function(t){if(!t)return!1;var i=void 0;if(1==e)i="3";else if(i="4",!a.audit.p_audit)return a.$message({type:"error",message:"请输入驳回审批意见"}),!1;Object(d.b)({p_statu:i,w_id:a.audit.w_id,w_title:a.audit.w_title,ptime:Object(c.a)(a.audit.p_delaytime,"date"),pname:a.$store.state.user.introduction,w_userid:a.audit.w_userid,p_audit:a.audit.p_audit}).then(function(t){t.state?(a.$message({type:"success",message:t.msg}),a.fetchData(),a.auditFormShow=!1):a.$message({type:"error",message:t.msg})})});break;case 3:this.$refs[t].validate(function(t){if(!t)return!1;Object(d.h)({p_statu:"6",w_id:a.audit.w_id,w_title:a.audit.w_title,w_userid:a.audit.w_userid,pname:a.$store.state.user.introduction,w_score_qua:a.audit.w_score_qua,w_score_time:a.audit.w_score_time}).then(function(t){t.state?(a.$message({type:"success",message:t.msg}),a.fetchData(),a.auditFormShow=!1):a.$message({type:"error",message:t.msg})})})}},finishFun:function(t){var e=this;this.$confirm("确认完成该任务吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(d.e)({p_statu:"5",w_id:t.w_id,w_title:t.w_title,ptime:"",pname:e.$store.state.user.introduction,w_userid:t.w_userid,p_audit:""}).then(function(t){t.state?(e.$message({type:"success",message:t.msg}),e.fetchData()):e.$message({type:"error",message:t.msg})})}).catch(function(){})},detail:function(t){this.detailData=t,this.detailShow=!0},handleDownload:function(){var t=this,e=this.list.concat(),i=!0,o=!1,s=void 0;try{for(var r,l=n()(e);!(i=(r=l.next()).done);i=!0){var u=r.value;u.u_dep_name=this.depFun(u.u_dep),u.w_starttime_name=Object(c.a)(u.w_starttime,"date"),u.w_endtime_name=Object(c.a)(u.w_endtime,"date"),u.w_num_name=this.numFun(u.list),this.numFun(u.list)?(u.u_yan=Object(c.a)(u.w_endtime,"date"),u.w_jin=u.list[0].p_content):(u.u_yan="",u.w_jin="")}}catch(t){o=!0,s=t}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}this.downloadLoading=!0,a.e(9).then(a.bind(null,"zWO4")).then(function(a){var i=e,o=t.formatJson(["w_title","w_content","w_source","u_name","u_dep_name","u_phone","u_email","w_starttime_name","w_endtime_name","u_yan","w_num_name","w_jin","w_score_qua","w_score_time","w_score_sum","w_operator_name"],i);a.export_json_to_excel({header:["任务名称","任务内容","任务来源","责任人","责任部门","手机号码","电子邮箱","开始时间","考核时间","延期时间","延期次数","最新进展","质量评分","时间评分","总分数","任务创建人"],data:o,filename:"任务导出",autoWidth:!0,bookType:"xlsx"}),t.downloadLoading=!1})},formatJson:function(t,e){return e.map(function(e){return t.map(function(t){return"datetime"===t?parseTime(e[t]):e[t]})})},_getDepUser:function(){var t=this;this.userOptions=[],Object(_.d)({u_dep:this.form.dep,isDepUser:!0}).then(function(e){e&&(t.userOptions=e.data.list)})},numFun:function(t){var e=0;if(t.length){var a=!0,i=!1,o=void 0;try{for(var s,r=n()(t);!(a=(s=r.next()).done);a=!0){"3"==s.value.p_statu&&(e+=1)}}catch(t){i=!0,o=t}finally{try{!a&&r.return&&r.return()}finally{if(i)throw o}}}return e},depFun:function(t){return{1:"通识教育中心",2:"行政中心",3:"教务处",4:"招生就业处",5:"人事处",6:"财务处",7:"质量中心",8:"信息中心",9:"后勤部",10:"工程机械学院",11:"智能制造学院",12:"人工智能学院",13:"建筑工业学院"}[t]}},computed:o()({},Object(u.b)(["roles","introduction","userId"]))},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container",attrs:{id:"projectTable"}},[a("div",{staticClass:"filter-container"},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"120px"},attrs:{size:"mini",placeholder:"请输入任务名称"},model:{value:t.listQuery.w_title,callback:function(e){t.$set(t.listQuery,"w_title",e)},expression:"listQuery.w_title"}}),t._v(" "),a("el-select",{staticStyle:{width:"110px"},attrs:{size:"mini",placeholder:"请选择状态"},model:{value:t.listQuery.w_statu,callback:function(e){t.$set(t.listQuery,"w_statu",e)},expression:"listQuery.w_statu"}},t._l(t.statuOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),a("el-date-picker",{staticStyle:{width:"135px"},attrs:{type:"datetime",placeholder:"选择开始时间",size:"mini"},model:{value:t.listQuery.w_starttime,callback:function(e){t.$set(t.listQuery,"w_starttime",e)},expression:"listQuery.w_starttime"}}),t._v(" "),a("el-date-picker",{staticStyle:{width:"135px"},attrs:{type:"datetime",placeholder:"选择结束时间",size:"mini"},model:{value:t.listQuery.w_endtime,callback:function(e){t.$set(t.listQuery,"w_endtime",e)},expression:"listQuery.w_endtime"}}),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"primary",icon:"el-icon-search"},on:{click:t.search}},[t._v("搜索")]),t._v(" "),"admin"==t.roles[0]?a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(e){t.operate("add")}}},[t._v("新增")]):t._e(),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{loading:t.downloadLoading,size:"mini",type:"primary",icon:"el-icon-download"},on:{click:t.handleDownload}},[t._v("导出")])],1),t._v(" "),"1"==t.listQuery.w_statu?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:"aTable",attrs:{data:t.list,"element-loading-text":"Loading",border:"",fit:""}},[a("el-table-column",{attrs:{fixed:"left",label:"任务名称","show-overflow-tooltip":!0,prop:"w_title",width:"120",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"任务内容","show-overflow-tooltip":!0,prop:"w_content","min-width":"120",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"任务来源","show-overflow-tooltip":!0,prop:"w_source","min-width":"120",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"负责人","show-overflow-tooltip":!0,width:"90",prop:"u_name",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"责任部门",prop:"u_dep","show-overflow-tooltip":!0,sortable:"",width:"160",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t._f("depFilter")(e.row.u_dep))+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"手机号码","show-overflow-tooltip":!0,width:"110",prop:"u_phone",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"开始时间",prop:"w_starttime","show-overflow-tooltip":!0,sortable:"",width:"160",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t._f("dateTime")(e.row.w_starttime,"date"))+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"考核时间",prop:"w_endtime","show-overflow-tooltip":!0,sortable:"",width:"160",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t._f("dateTime")(e.row.w_endtime,"date"))+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"最新进展",prop:"list","show-overflow-tooltip":!0,sortable:"",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(0!=e.row.list.length?e.row.list[0].p_content:"暂无数据")+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"状态",prop:"w_statu","show-overflow-tooltip":!0,sortable:"",width:"90",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:t._f("statusFilter")(e.row.w_statu)}},[t._v(t._s(t._f("statuTextFilter")(e.row.w_statu)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作",width:"190"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button-group",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){t.detail(e.row)}}},[t._v("查看")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"1"==e.row.w_statu||"2"==e.row.w_statu,expression:"scope.row.w_statu == '1' || scope.row.w_statu == '2'"}],attrs:{size:"mini",type:"primary"},on:{click:function(a){t.operate("edit",e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"2"==e.row.w_statu&&"admin"==t.roles[0],expression:"scope.row.w_statu == '2' && roles[0] == 'admin'"}],attrs:{size:"mini",type:"primary"},on:{click:function(a){t.auditFun(2,e.row)}}},[t._v("审批")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"2"==e.row.w_statu,expression:"scope.row.w_statu == '2'"}],attrs:{size:"mini",type:"primary"},on:{click:function(a){t.auditFun(1,e.row)}}},[t._v("延时")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:("3"==e.row.w_statu||"4"==e.row.w_statu)&&"admin"==t.roles[0],expression:"(scope.row.w_statu == '3' || scope.row.w_statu == '4') && roles[0] == 'admin'"}],attrs:{size:"mini",type:"primary"},on:{click:function(a){t.auditFun(3,e.row)}}},[t._v(t._s("4"==e.row.w_statu?"修改评分":"评分"))]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:("1"==e.row.w_statu||"2"==e.row.w_statu)&&"admin"!=t.roles[0],expression:"(scope.row.w_statu == '1' || scope.row.w_statu == '2') && roles[0] != 'admin'"}],attrs:{size:"mini",type:"primary"},on:{click:function(a){t.finishFun(e.row)}}},[t._v("完成\n          ")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"1"==e.row.w_statu||"2"==e.row.w_statu,expression:"scope.row.w_statu == '1' || scope.row.w_statu == '2'"}],attrs:{size:"mini",type:"primary"},on:{click:function(a){t.operation({w_id:e.row.w_id},"确认删除吗","/delWork")}}},[t._v("删除\n          ")])],1)]}}])})],1):"2"==t.listQuery.w_statu||"3"==t.listQuery.w_statu?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:"bTable",attrs:{data:t.list,"element-loading-text":"Loading",border:"",fit:""}},[a("el-table-column",{attrs:{fixed:"left",label:"任务名称","show-overflow-tooltip":!0,prop:"w_title",width:"120",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"任务内容","show-overflow-tooltip":!0,prop:"w_content","min-width":"120",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"任务来源","show-overflow-tooltip":!0,prop:"w_source","min-width":"120",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"负责人","show-overflow-tooltip":!0,width:"90",prop:"u_name",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"责任部门",prop:"u_dep","show-overflow-tooltip":!0,sortable:"",width:"160",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t._f("depFilter")(e.row.u_dep))+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"手机号码","show-overflow-tooltip":!0,width:"110",prop:"u_phone",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"开始时间",prop:"w_starttime","show-overflow-tooltip":!0,sortable:"",width:"160",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t._f("dateTime")(e.row.w_starttime,"date"))+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"考核时间",prop:"w_endtime","show-overflow-tooltip":!0,sortable:"",width:"160",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t._f("dateTime")(e.row.w_endtime,"date"))+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"延期时间",prop:"w_endtime","show-overflow-tooltip":!0,sortable:"",width:"160",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t._f("dateTime")(e.row.w_endtime,"date"))+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"延期次数",prop:"list","show-overflow-tooltip":!0,sortable:"",width:"160",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t._f("forNumFilter")(e.row.list))+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"最新进展",prop:"list","show-overflow-tooltip":!0,sortable:"",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(0!=e.row.list.length?e.row.list[0].p_content:"暂无数据")+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"状态",prop:"w_statu","show-overflow-tooltip":!0,sortable:"",width:"90",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:t._f("statusFilter")(e.row.w_statu)}},[t._v(t._s(t._f("statuTextFilter")(e.row.w_statu)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作",width:3==t.listQuery.w_statu?"120":"270"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button-group",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){t.detail(e.row)}}},[t._v("查看")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"1"==e.row.w_statu||"2"==e.row.w_statu,expression:"scope.row.w_statu == '1' || scope.row.w_statu == '2'"}],attrs:{size:"mini",type:"primary"},on:{click:function(a){t.operate("edit",e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"2"==e.row.w_statu&&"admin"==t.roles[0],expression:"scope.row.w_statu == '2' && roles[0] == 'admin'"}],attrs:{size:"mini",type:"primary"},on:{click:function(a){t.auditFun(2,e.row)}}},[t._v("审批")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"2"==e.row.w_statu,expression:"scope.row.w_statu == '2'"}],attrs:{size:"mini",type:"primary"},on:{click:function(a){t.auditFun(1,e.row)}}},[t._v("延时")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:("3"==e.row.w_statu||"4"==e.row.w_statu)&&"admin"==t.roles[0],expression:"(scope.row.w_statu == '3' || scope.row.w_statu == '4') && roles[0] == 'admin'"}],attrs:{size:"mini",type:"primary"},on:{click:function(a){t.auditFun(3,e.row)}}},[t._v(t._s("4"==e.row.w_statu?"修改评分":"评分"))]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:("1"==e.row.w_statu||"2"==e.row.w_statu)&&"admin"!=t.roles[0],expression:"(scope.row.w_statu == '1' || scope.row.w_statu == '2') && roles[0] != 'admin'"}],attrs:{size:"mini",type:"primary"},on:{click:function(a){t.finishFun(e.row)}}},[t._v("完成\n          ")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"1"==e.row.w_statu||"2"==e.row.w_statu,expression:"scope.row.w_statu == '1' || scope.row.w_statu == '2'"}],attrs:{size:"mini",type:"primary"},on:{click:function(a){t.operation({w_id:e.row.w_id},"确认删除吗","/delWork")}}},[t._v("删除\n          ")])],1)]}}])})],1):a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:"cTable",attrs:{data:t.list,"element-loading-text":"Loading",border:"",fit:""}},[a("el-table-column",{attrs:{fixed:"left",label:"任务名称","show-overflow-tooltip":!0,prop:"w_title",width:"120",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"任务内容","show-overflow-tooltip":!0,prop:"w_content","min-width":"120",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"任务来源","show-overflow-tooltip":!0,prop:"w_source","min-width":"120",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"负责人","show-overflow-tooltip":!0,width:"90",prop:"u_name",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"责任部门",prop:"u_dep","show-overflow-tooltip":!0,sortable:"",width:"160",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t._f("depFilter")(e.row.u_dep))+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"手机号码","show-overflow-tooltip":!0,width:"110",prop:"u_phone",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"开始时间",prop:"w_starttime","show-overflow-tooltip":!0,sortable:"",width:"160",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t._f("dateTime")(e.row.w_starttime,"date"))+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"考核时间",prop:"w_endtime","show-overflow-tooltip":!0,sortable:"",width:"160",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t._f("dateTime")(e.row.w_endtime,"date"))+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"延期时间",prop:"w_endtime","show-overflow-tooltip":!0,sortable:"",width:"160",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t._f("dateTime")(e.row.w_endtime,"date"))+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"延期次数",prop:"list","show-overflow-tooltip":!0,sortable:"",width:"160",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t._f("forNumFilter")(e.row.list))+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"质量评分","show-overflow-tooltip":!0,width:"110",prop:"w_score_qua",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"时间评分","show-overflow-tooltip":!0,width:"110",prop:"w_score_time",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"总分","show-overflow-tooltip":!0,width:"80",prop:"w_score_sum",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"状态",prop:"w_statu","show-overflow-tooltip":!0,sortable:"",width:"90",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:t._f("statusFilter")(e.row.w_statu)}},[t._v(t._s(t._f("statuTextFilter")(e.row.w_statu)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button-group",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){t.detail(e.row)}}},[t._v("查看")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"1"==e.row.w_statu||"2"==e.row.w_statu,expression:"scope.row.w_statu == '1' || scope.row.w_statu == '2'"}],attrs:{size:"mini",type:"primary"},on:{click:function(a){t.operate("edit",e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"2"==e.row.w_statu&&"admin"==t.roles[0],expression:"scope.row.w_statu == '2' && roles[0] == 'admin'"}],attrs:{size:"mini",type:"primary"},on:{click:function(a){t.auditFun(2,e.row)}}},[t._v("审批")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"2"==e.row.w_statu,expression:"scope.row.w_statu == '2'"}],attrs:{size:"mini",type:"primary"},on:{click:function(a){t.auditFun(1,e.row)}}},[t._v("延时")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:("3"==e.row.w_statu||"4"==e.row.w_statu)&&"admin"==t.roles[0],expression:"(scope.row.w_statu == '3' || scope.row.w_statu == '4') && roles[0] == 'admin'"}],attrs:{size:"mini",type:"primary"},on:{click:function(a){t.auditFun(3,e.row)}}},[t._v(t._s("4"==e.row.w_statu?"修改评分":"评分"))]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:("1"==e.row.w_statu||"2"==e.row.w_statu)&&"admin"!=t.roles[0],expression:"(scope.row.w_statu == '1' || scope.row.w_statu == '2') && roles[0] != 'admin'"}],attrs:{size:"mini",type:"primary"},on:{click:function(a){t.finishFun(e.row)}}},[t._v("完成\n          ")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"1"==e.row.w_statu||"2"==e.row.w_statu,expression:"scope.row.w_statu == '1' || scope.row.w_statu == '2'"}],attrs:{size:"mini",type:"primary"},on:{click:function(a){t.operation({w_id:e.row.w_id},"确认删除吗","/delWork")}}},[t._v("删除\n          ")])],1)]}}])})],1),t._v(" "),a("el-pagination",{attrs:{background:"","current-page":t.listQuery.page,"page-sizes":t.pageSizes,"page-size":t.listQuery.size,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t._v(" "),a("el-dialog",{attrs:{title:t.operateTitle,width:"530px",visible:t.formShow,"modal-append-to-body":!1},on:{"update:visible":function(e){t.formShow=e},close:function(e){t.operateClose("formAdd")}}},[a("el-form",{ref:"formAdd",attrs:{model:t.form,"label-position":"right","label-width":"105px"}},[a("el-form-item",{attrs:{label:"任务名称：",prop:"w_title",rules:[{required:!0,message:"请输入任务名称",trigger:"blur"}]}},[a("el-input",{attrs:{placeholder:"请输入任务名称"},model:{value:t.form.w_title,callback:function(e){t.$set(t.form,"w_title",e)},expression:"form.w_title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"任务内容：",prop:"w_content",rules:[{required:!0,message:"请输入任务内容",trigger:"blur"}]}},[a("el-input",{attrs:{rows:4,type:"textarea",placeholder:"请输入任务内容"},model:{value:t.form.w_content,callback:function(e){t.$set(t.form,"w_content",e)},expression:"form.w_content"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"任务来源：",prop:"w_source",rules:[{required:!0,message:"请输入任务来源",trigger:"blur"}]}},[a("el-input",{attrs:{placeholder:"请输入任务来源"},model:{value:t.form.w_source,callback:function(e){t.$set(t.form,"w_source",e)},expression:"form.w_source"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"责任部门：",prop:"dep",rules:[{required:!0,message:"请选择责任部门",trigger:"change"}]}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择责任部门"},model:{value:t.form.dep,callback:function(e){t.$set(t.form,"dep",e)},expression:"form.dep"}},t._l(t.departmentOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"责任人：",prop:"userid",rules:[{required:!0,message:"请选择责任人",trigger:"change"}]}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择责任人"},model:{value:t.form.userid,callback:function(e){t.$set(t.form,"userid",e)},expression:"form.userid"}},t._l(t.userOptions,function(t){return a("el-option",{key:t.id,attrs:{label:t.u_name,value:t.u_id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"开始时间：",prop:"w_starttime",rules:[{required:!0,message:"请选择开始时间",trigger:"change"}]}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"请选择开始时间"},model:{value:t.form.w_starttime,callback:function(e){t.$set(t.form,"w_starttime",e)},expression:"form.w_starttime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"考核时间：",prop:"w_endtime",rules:[{required:!0,message:"请选择考核时间",trigger:"change"}]}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"请选择考核时间"},model:{value:t.form.w_endtime,callback:function(e){t.$set(t.form,"w_endtime",e)},expression:"form.w_endtime"}})],1),t._v(" "),t.isEdit?a("el-form-item",{attrs:{label:"最新进展：",prop:"progress",rules:[{required:!0,message:"请输入任务进展",trigger:"blur"}]}},[a("el-input",{attrs:{rows:4,type:"textarea",placeholder:"请输入任务进展"},model:{value:t.form.progress,callback:function(e){t.$set(t.form,"progress",e)},expression:"form.progress"}})],1):t._e()],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.operateClose("formAdd")}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.save("formAdd")}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:t.auditTitle,width:"530px",visible:t.auditFormShow,"modal-append-to-body":!1},on:{"update:visible":function(e){t.auditFormShow=e},close:function(e){t.auditClose("formAudit")}}},[a("el-form",{ref:"formAudit",attrs:{model:t.audit,"label-position":"right","label-width":"105px"}},[1==t.audit.auditType?a("el-form-item",{attrs:{label:"延期时间：",prop:"p_delaytime",rules:[{required:!0,message:"请选择延期时间",trigger:"change"}]}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"请选择延期时间"},model:{value:t.audit.p_delaytime,callback:function(e){t.$set(t.audit,"p_delaytime",e)},expression:"audit.p_delaytime"}})],1):t._e(),t._v(" "),1==t.audit.auditType?a("el-form-item",{attrs:{label:"延期说明：",prop:"p_audit",rules:[{required:!0,message:"请输入延期说明",trigger:"blur"}]}},[a("el-input",{attrs:{rows:4,type:"textarea",placeholder:"请输入延期说明"},model:{value:t.audit.p_audit,callback:function(e){t.$set(t.audit,"p_audit",e)},expression:"audit.p_audit"}})],1):t._e(),t._v(" "),2==t.audit.auditType?a("el-form-item",{attrs:{label:"审批意见："}},[a("el-input",{attrs:{rows:4,type:"textarea",placeholder:"请输入审批意见"},model:{value:t.audit.p_audit,callback:function(e){t.$set(t.audit,"p_audit",e)},expression:"audit.p_audit"}})],1):t._e(),t._v(" "),3==t.audit.auditType?a("el-form-item",{attrs:{label:"质量评分：",prop:"w_score_qua",rules:[{required:!0,message:"请输入质量评分",trigger:"blur"}]}},[a("el-input",{attrs:{placeholder:"请输入质量评分"},model:{value:t.audit.w_score_qua,callback:function(e){t.$set(t.audit,"w_score_qua",e)},expression:"audit.w_score_qua"}})],1):t._e(),t._v(" "),3==t.audit.auditType?a("el-form-item",{attrs:{label:"时间评分：",prop:"w_score_time",rules:[{required:!0,message:"请输入时间评分",trigger:"blur"}]}},[a("el-input",{attrs:{placeholder:"请输入时间评分"},model:{value:t.audit.w_score_time,callback:function(e){t.$set(t.audit,"w_score_time",e)},expression:"audit.w_score_time"}})],1):t._e()],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.auditClose("formAudit")}}},[t._v("取 消")]),t._v(" "),2==t.audit.auditType?a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.auditSave("formAudit",2)}}},[t._v("驳 回")]):t._e(),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.auditSave("formAudit",1)}}},[t._v(t._s(2==t.audit.auditType?"通 过":" 保存"))])],1)],1),t._v(" "),a("el-dialog",{staticClass:"detail-dialog-top",attrs:{title:"查看任务",width:"850px",visible:t.detailShow,"modal-append-to-body":!1},on:{"update:visible":function(e){t.detailShow=e},close:function(e){t.detailShow=!1}}},[t.detailData?a("div",{staticClass:"is-scrolling-none"},[t.detailData?a("table",{staticClass:"el-table__body"},[a("tr",[a("td",{staticClass:"text-bold",staticStyle:{width:"90px"}},[t._v("任务名称")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.detailData.w_title))]),t._v(" "),a("td",{staticClass:"text-bold",staticStyle:{width:"90px"}},[t._v("任务来源")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.detailData.w_source))])]),t._v(" "),a("tr",[a("td",{staticClass:"text-bold",staticStyle:{width:"100px"}},[t._v("责任人")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.detailData.u_name))]),t._v(" "),a("td",{staticClass:"text-bold",staticStyle:{width:"100px"}},[t._v("责任部门")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t._f("depFilter")(t.detailData.u_dep)))])]),t._v(" "),a("tr",[a("td",{staticClass:"text-bold",staticStyle:{width:"100px"}},[t._v("手机号码")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.detailData.u_phone))]),t._v(" "),a("td",{staticClass:"text-bold",staticStyle:{width:"100px"}},[t._v("电子邮箱")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.detailData.u_email))])]),t._v(" "),a("tr",[a("td",{staticClass:"text-bold",staticStyle:{width:"100px"}},[t._v("开始时间")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t._f("dateTime")(t.detailData.w_starttime,"date")))]),t._v(" "),a("td",{staticClass:"text-bold",staticStyle:{width:"100px"}},[t._v("考核时间")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t._f("dateTime")(t.detailData.w_endtime,"date")))])]),t._v(" "),t.numFun(t.detailData.list)>0?a("tr",[a("td",{staticClass:"text-bold",staticStyle:{width:"100px"}},[t._v("延期时间")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t._f("dateTime")(t.detailData.w_endtime,"date")))]),t._v(" "),a("td",{staticClass:"text-bold",staticStyle:{width:"100px"}},[t._v("延期次数")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t._f("forNumFilter")(t.detailData.list)))])]):t._e(),t._v(" "),a("tr",[a("td",{staticClass:"text-bold",staticStyle:{width:"100px"}},[t._v("创建人")]),t._v(" "),a("td",{attrs:{colspan:"5"}},[t._v(t._s(t.detailData.w_operator_name))])]),t._v(" "),a("tr",[a("td",{staticClass:"text-bold"},[t._v("任务内容")]),t._v(" "),a("td",{attrs:{colspan:"5"}},[t._v(t._s(t.detailData.w_content))])]),t._v(" "),a("tr",[a("td",{staticClass:"text-bold",staticStyle:{width:"100px"}},[t._v("质量评分")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.detailData.w_score_qua))]),t._v(" "),a("td",{staticClass:"text-bold",staticStyle:{width:"100px"}},[t._v("时间评分")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.detailData.w_score_time))])]),t._v(" "),a("tr",[a("td",{staticClass:"text-bold",staticStyle:{width:"100px"}},[t._v("总评")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.detailData.w_score_sum))]),t._v(" "),a("td",{staticClass:"text-bold",staticStyle:{width:"100px"}},[t._v("任务状态")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t._f("statuTextFilter")(t.detailData.w_statu)))])])]):t._e(),t._v(" "),a("table",{staticClass:"el-table__body",staticStyle:{"margin-top":"15px"}},[a("tr",{staticStyle:{background:"#f7f7f7"}},[a("td",{staticClass:"text-bold",staticStyle:{width:"90px"}}),t._v(" "),a("td",{staticClass:"text-bold",attrs:{colspan:"4"}},[t._v("进展内容")]),t._v(" "),a("td",{staticClass:"text-bold",staticStyle:{width:"150px !important"}},[t._v("操作时间")])]),t._v(" "),0==t.detailData.list.length?a("tr",[a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"6"}},[t._v("---暂无任务进展---")])]):t._e(),t._v(" "),t._l(t.detailData.list,function(e,i){return t.detailData.list.length>0?a("tr",{key:i},[a("td",[t._v(t._s(i+1))]),t._v(" "),a("td",{attrs:{colspan:"4"}},[t._v(t._s(e.p_content))]),t._v(" "),a("td",{staticStyle:{width:"150px !important"}},[t._v(t._s(t._f("dateTime")(e.p_time,"date")))])]):t._e()})],2)]):t._e(),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.detailShow=!1}}},[t._v("关 闭")])],1)])],1)},staticRenderFns:[]};var v=a("VU/8")(p,m,!1,function(t){a("Ne+T"),a("eI7r")},"data-v-2e26ed4a",null);e.default=v.exports},GUlH:function(t,e,a){"use strict";e.g=function(t){return Object(i.b)({url:"/getWorkList",method:"get",params:t})},e.f=function(t){return Object(i.b)({url:"/getMyWorkList",method:"get",params:t})},e.a=function(t){return Object(i.b)({url:"/addWork",method:"post",data:t})},e.d=function(t){return Object(i.b)({url:"/editWork",method:"post",data:t})},e.c=function(t){return Object(i.b)({url:"/delayWork",method:"post",data:t})},e.b=function(t){return Object(i.b)({url:"/auditWork",method:"post",data:t})},e.e=function(t){return Object(i.b)({url:"/finishWork",method:"post",data:t})},e.h=function(t){return Object(i.b)({url:"/scoreWork",method:"post",data:t})};var i=a("vLgD")},"Ne+T":function(t,e){},eI7r:function(t,e){}});
//# sourceMappingURL=3.83d058f609bad44113a7.js.map