webpackJsonp([5],{"1wcw":function(e,t){},j7U9:function(e,t){},md3T:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("woOf"),l=r.n(a),o=r("NC6I"),s=r.n(o),i=r("vMJZ"),n=r("E4LH"),u=r("vLgD"),p=function(e,t,r){t?Object(n.b)(t)?r():r(new Error("请输入正确的用户名，字母、数字、下划线、并不能以下划线开头结尾")):r(new Error("请输入用户名"))},d=function(e,t,r){t?Object(n.c)(t)?r():r(new Error("请输入正确的11位手机号码")):r(new Error("请输入手机号码"))},c={filters:{depFilter:function(e){return{1:"通识教育中心",2:"行政中心",3:"教务处",4:"招生就业处",5:"人事处",6:"财务处",7:"质量中心",8:"信息中心",9:"后勤部",10:"工程机械学院",11:"智能制造学院",12:"人工智能学院",13:"建筑工业学院"}[e]},roleFilter:function(e){return{admin:"超管管理",editor:"管理员",other:"普通成员"}[e]},statusFilter:function(e){return{editor:"success",other:"info",admin:"danger"}[e]},fileFilter:function(e){return-1!==e.indexOf("[")&&-1!==e.indexOf("]")?e.split("[")[0]+e.split("]")[1]:e}},data:function(){var e=this;return{list:null,listLoading:!0,total:0,pageSizes:[10,15,20],listQuery:{page:1,size:10,name:"",u_dep:""},form:{u_username:"",u_password:"",u_name:"",u_phone:"",u_sex:"1",u_dep:"",u_roles:"admin",u_email:"",repeatPass:""},isEdit:!1,operateTitle:"",formShow:!1,rules:{u_username:[{required:!0,trigger:"blur",validator:p}],u_password:[{required:!0,validator:function(t,r,a){""===r?a(new Error("请输入密码")):(""!==e.form.repeatPass&&e.$refs.formAdd.validateField("repeatPass"),a())},trigger:"blur"}],repeatPass:[{required:!0,validator:function(t,r,a){""===r?a(new Error("请再次输入密码")):r!==e.form.u_password?a(new Error("两次输入密码不一致!")):a()},trigger:"blur"}],u_phone:[{required:!0,trigger:"blur",validator:d}]},departmentOptions:[{label:"所有部门",value:""},{label:"通识教育中心",value:"1"},{label:"行政中心",value:"2"},{label:"教务处",value:"3"},{label:"招生就业处",value:"4"},{label:"人事处",value:"5"},{label:"财务处",value:"6"},{label:"质量中心",value:"7"},{label:"信息中心",value:"8"},{label:"后勤部",value:"9"},{label:"工程机械学院",value:"10"},{label:"智能制造学院",value:"11"},{label:"人工智能学院",value:"12"},{label:"建筑工业学院",value:"13"}]}},watch:{listQuery:{handler:function(){this.search()},deep:!0}},created:function(){this.fetchData()},methods:{fetchData:function(){var e=this;this.listLoading=!0,Object(i.d)(this.listQuery).then(function(t){t&&(e.list=t.data.list,e.total=t.data.count,e.listLoading=!1)})},handleSizeChange:function(e){this.listQuery.size=e},handleCurrentChange:function(e){this.listQuery.page=e},search:function(){this.fetchData()},operation:function(e,t,r){Object(u.a)(this,t,r,e)},operate:function(e,t){"add"===e?(this.operateTitle="新增用户信息",this.isEdit=!1):"edit"===e&&(this.isEdit=!0,this.form=l()({},{u_id:t.u_id,u_username:t.u_username,u_name:t.u_name,u_phone:t.u_phone,u_sex:t.u_sex,u_dep:t.u_dep,u_roles:t.u_roles,u_email:t.u_email}),this.operateTitle="编辑用户信息"),this.formShow=!0},operateClose:function(e){this.$refs[e].resetFields(),this.formShow=!1,this.form={u_username:"",u_password:"",u_name:"",u_phone:"",u_sex:"1",u_dep:"",u_roles:"admin",u_email:"",repeatPass:""}},save:function(e){var t=this;if(!0===this.isEdit)this.$refs[e].validate(function(e){if(!e)return!1;Object(i.c)(t.form).then(function(e){t.$message({type:"success",message:e.msg}),t.fetchData(),t.formShow=!1})});else{var r=l()({},this.form);r.u_password=s()(r.u_password),r.repeatPass=s()(r.repeatPass),this.$refs[e].validate(function(e){if(!e)return!1;Object(i.a)(r).then(function(e){e.state?(t.$message({type:"success",message:e.msg}),t.fetchData(),t.formShow=!1):t.$message({type:"error",message:e.msg})})})}},indexMethod:function(e){return 2*e}}},m={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container",attrs:{id:"userTable"}},[r("div",{staticClass:"filter-container"},[r("el-input",{staticClass:"filter-item",staticStyle:{width:"120px"},attrs:{size:"mini",placeholder:"请输入姓名"},model:{value:e.listQuery.name,callback:function(t){e.$set(e.listQuery,"name",t)},expression:"listQuery.name"}}),e._v(" "),r("el-select",{staticStyle:{width:"120px"},attrs:{size:"mini",placeholder:"请选择部门"},model:{value:e.listQuery.u_dep,callback:function(t){e.$set(e.listQuery,"u_dep",t)},expression:"listQuery.u_dep"}},e._l(e.departmentOptions,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),r("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),r("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(t){e.operate("add")}}},[e._v("新增")])],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[r("el-table-column",{attrs:{type:"index"}}),e._v(" "),r("el-table-column",{attrs:{label:"姓名",prop:"u_name","show-overflow-tooltip":!0,sortable:"",width:"120"}}),e._v(" "),r("el-table-column",{attrs:{label:"性别",prop:"u_sex","show-overflow-tooltip":!0,sortable:"",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s("1"==t.row.u_sex?"男":"女")+"\n      ")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"联系电话",prop:"u_phone","show-overflow-tooltip":!0,sortable:""}}),e._v(" "),r("el-table-column",{attrs:{label:"部门",prop:"u_dep","show-overflow-tooltip":!0,sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("depFilter")(t.row.u_dep))+"\n      ")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"用户名",prop:"u_username","show-overflow-tooltip":!0,sortable:""}}),e._v(" "),r("el-table-column",{attrs:{label:"电子邮箱",prop:"u_email","show-overflow-tooltip":!0,sortable:""}}),e._v(" "),r("el-table-column",{attrs:{label:"权限",prop:"u_roles","show-overflow-tooltip":!0,sortable:"",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",{attrs:{type:e._f("statusFilter")(t.row.u_roles)}},[e._v(e._s(e._f("roleFilter")(t.row.u_roles)))])]}}])}),e._v(" "),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button-group",[r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(r){e.operation({id:t.row.u_id},"确认重置密码吗","/resetUser")}}},[e._v("重置密码")]),e._v(" "),r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(r){e.operate("edit",t.row)}}},[e._v("编辑")]),e._v(" "),r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(r){e.operation({id:t.row.u_id},"确认删除吗","/delUser")}}},[e._v("删除")])],1)]}}])})],1),e._v(" "),r("el-pagination",{attrs:{background:"","current-page":e.listQuery.page,"page-sizes":e.pageSizes,"page-size":e.listQuery.size,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),r("el-dialog",{attrs:{title:e.operateTitle,width:"530px",visible:e.formShow,"modal-append-to-body":!1},on:{"update:visible":function(t){e.formShow=t},close:function(t){e.operateClose("formAdd")}}},[r("el-form",{ref:"formAdd",attrs:{model:e.form,rules:e.rules,"label-position":"right","label-width":"95px"}},[r("el-form-item",{attrs:{label:"用户名：",prop:"u_username"}},[r("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.form.u_username,callback:function(t){e.$set(e.form,"u_username",t)},expression:"form.u_username"}})],1),e._v(" "),e.isEdit?e._e():r("el-form-item",{attrs:{label:"密码：",prop:"u_password"}},[r("el-input",{attrs:{placeholder:"请输入密码"},model:{value:e.form.u_password,callback:function(t){e.$set(e.form,"u_password",t)},expression:"form.u_password"}})],1),e._v(" "),e.isEdit?e._e():r("el-form-item",{attrs:{label:"确认密码：",prop:"repeatPass"}},[r("el-input",{attrs:{placeholder:"请再次输入密码"},model:{value:e.form.repeatPass,callback:function(t){e.$set(e.form,"repeatPass",t)},expression:"form.repeatPass"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"姓名：",prop:"u_name",rules:[{required:!0,message:"请输入姓名",trigger:"blur"}]}},[r("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.form.u_name,callback:function(t){e.$set(e.form,"u_name",t)},expression:"form.u_name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"部门：",prop:"u_dep",rules:[{required:!0,message:"请选择部门",trigger:"change"}]}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择部门"},model:{value:e.form.u_dep,callback:function(t){e.$set(e.form,"u_dep",t)},expression:"form.u_dep"}},e._l(e.departmentOptions,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"性别",prop:"u_sex",rules:[{required:!0,message:"请选择性别",trigger:"change"}]}},[r("el-radio-group",{model:{value:e.form.u_sex,callback:function(t){e.$set(e.form,"u_sex",t)},expression:"form.u_sex"}},[r("el-radio",{attrs:{label:"1"}},[e._v("男")]),e._v(" "),r("el-radio",{attrs:{label:"2"}},[e._v("女")])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"手机号码：",prop:"u_phone"}},[r("el-input",{attrs:{placeholder:"请输入手机号码"},model:{value:e.form.u_phone,callback:function(t){e.$set(e.form,"u_phone",t)},expression:"form.u_phone"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"电子邮箱：",prop:"u_email",rules:[{required:!0,message:"请输入电子邮箱",trigger:"blur"},{type:"email",message:"请输入正确的电子邮箱",trigger:["blur","change"]}]}},[r("el-input",{attrs:{placeholder:"请输入电子邮箱"},model:{value:e.form.u_email,callback:function(t){e.$set(e.form,"u_email",t)},expression:"form.u_email"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"权限：",prop:"u_roles",rules:[{required:!0,message:"请选择权限",trigger:"change"}]}},[r("el-radio-group",{model:{value:e.form.u_roles,callback:function(t){e.$set(e.form,"u_roles",t)},expression:"form.u_roles"}},[r("el-radio",{attrs:{label:"admin"}},[e._v("超级管理")]),e._v(" "),r("el-radio",{attrs:{label:"editor"}},[e._v("管理员")]),e._v(" "),r("el-radio",{attrs:{label:"other"}},[e._v("普通成员")])],1)],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.operateClose("formAdd")}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.save("formAdd")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var f=r("VU/8")(c,m,!1,function(e){r("1wcw"),r("j7U9")},"data-v-0a3cdae4",null);t.default=f.exports}});
//# sourceMappingURL=5.bbb9d9849cb6f495e413.js.map